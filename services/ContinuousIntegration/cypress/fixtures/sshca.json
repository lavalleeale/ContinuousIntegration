{
  "gitConfig": "--branch v4.0.2",
  "containers": [
    {
      "id": "build",
      "image": "base",
      "steps": [
        "yarn --immutable",
        "yarn --cwd ./server build"
      ],
      "uploads": [
        "/repo/server/dist"
      ]
    },
    {
      "id": "test",
      "image": "base",
      "steps": [
        "cp -a /neededFiles/dist server/dist",
        "echo \"REFUQUJBU0VfVVJMPSJwb3N0Z3Jlc3FsOi8vZGV2ZWxvcG1lbnQ6ZGV2ZWxvcG1lbnRAc2VydmljZTo1NDMyL2RldmVsb3BtZW50IgpKV1RfUFJJVkFURT0iLS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBdExYWHhRaGpkVnZ2YkR1bU41endNZHlnWWU4S21MR1hsZFc0d3Q0bEFNWnRBUDdJCkNmbktmV0l1alhFOHNiekJWb0dpUmxnQ1FyWEJ6bHFmanRNRjdwSzZJb21zWjRxVE4yQmdTNW9NaUtYM2tqS0IKOXErWU9wbUZVSjNicUUzekwrU2tFMjMwZ2tMcThQbnQwaTIrOGNkVHFHM0JML09mbExnMEdTU2RmVVJieXgvaQpuemZ2a0w4WjMxM1NraCsrejRkekZzYzNtamZDczVzSS9WNnpUdVpxeUUwMGdHdzlSblMwVSsyRXo0THpqVWpGCm14RjJoaHpTTWtEbVJYY0xnMGkzSXdTZkgrUWd4VjY0eEFCdjE5YkdKQ1dIZENLanZxTjdYZ24zUW1KdjRncHIKYjFXVjNsZ3F4M0gvci9KOXVhVFF3bUpYV2poYWZwaEc3UVdjMlhiV0ZZV3dkc1pjQXIrOFNTc1ZiMDFaNDRSQwpkMFFZSEdIV1I0MlBYQzQ3YjlvRytHK3hBTjE1RmlxOXIzM1R1c0s2cVgwdGdka0lkTy9FcllFTkZBS0dxTWlsClJIZkNmMXpPSEUzalQyK2hxdjZKNkgrcno0QnQvQ2IvZUZLeVhTdkM5WC82UVgyb0tIdUxhOFk3eEk5TUNuQi8KeWN2RmpxaHBkOWYva05GZDRZWGZzRHpjb25HS1NULzJ6Q3hIbE93czJwR1NnRWVtT3ljQW5GVkxJVWQ0N2NnRgpsTW80Z2F3UnU1K3REbUNGMjU2MVdaNmVEQ0RyRVBOZXRWWFJlOHJFQnZXdWcyaVpnN0FFN0NnQWpMd1NGM2JsCko5a3RQelZWOHJPWU5MbWY5RURNUjkvR1UvT3VyT0MwMVByWHlpbUQyNGtTY1c2bTNpWVhCbE5YTkljQ0F3RUEKQVFLQ0FnRUFnZ05lZE55L0tkMTJHVW1sSWRmZ25BOGV1TGNSeVovajdxSXdac3NLbGs4c2Q0M1hBQTVlViswKwpqdmJNY3hmWmhkS0luTkdPOXMzcjNQb29WOHFOTndNTHRmT1ZQWDFldzNXc2NsZ244bHh1RFJvWGxSTHFsQ2FGCjJ1Vm45dVAyTmh2cXpDdk13YmRCYnhSeHZVaTZXeHRNbmg0dzRyNEZyeXNFR0o3V1RCelZhZ1BMdVQrMk5VNjQKWDVNUi81MmxXNHdaQ21kVUlybEJkSlR6Vjg4OWRHT2txZTJaKzFka2tuOCtpaStWNFBKWEpld1lkNk9Od1ptVQp4U0VhU3hvR0IzTldoM1E0dytvT2hkSExYd0R0ZHIySUd0T0JhOVhNTjBsSlpmUUhtQlJZYUttVWVDcDhROWJ0CkdFZDFiUElxOEZpYTlXOXBaM2lwNnZERi9wdU9KMVY1cTlDR1dyRnNhdlZ6Ung2UVVsTUNVQzdtVHcrSW5mYUgKSStxSFg0eHA3bWNFZDYvVUx1MFNWQjg1Vkg2R1RzcWIzTldRWjVzRElDVUczM2pTRU4vd3NWYk9qZ3BOUEhscApzVUVJdnAvOUI2NjUyWHdqZTVCOVFMNGhEQmlXeWUycFpoc0N3M3RDcFpHSHVPRk5Bd2dsVi9LSDhHMld1NlZ6CkxmZktLNVpjN25mei9ISFZOL3p6eVYrTkNjVi94ekRPVmJDQnNGdkJwRVVxaTRTRkxjL3ROcmVCck15KzFWN00KdjFUYll2R0JlVUtDaEw5bXpVcko5cERwMFAzVWt0UHovSU5lTjM3VS9aQUNXNERDaWtQWC9UVXc2NDNwMWoycApUbXlFYk1kMVBucHJCVEV3RDVGYk00UWI3NGVDTmhFTlBzWHBOaGpEV25zc1F0bUxZcEVDZ2dFQkFOOUR0MnUxCmlvSkhia0d6b0lkVGlsMDZLaSs4VmdrcnhGYjAzYW9uNktueXBrKyswekU5dlVkT3ZaQjFJb0htUnJoTEZqS1oKS042eXdlQU5XcXppWmI0elRQMmhGd2ZVMWczNGVDRGlZZTBYc25wV3dJRXNDQ3IrNTRLU01tUkpQaVF4RzR4YgpFbVRIZ25BdEV1WHpCTHYrTHVGU3lEcUlGUnB3TWFQcHkrSzZOUlRpajUyUStSQk1PT0Q4aEdRemY4VFBsRkpSCnZIclgvSHBQbmV3UFJIdUJ0b2hyaHNWa2pOckxRRmNWdUJmTE0wNE9FVi9oQktnWEJIQjMyVDR0NzVLT05lWE4KV0lRZ1Y5MjZmSVV5NUloQlRESm9qTE15NjFNOW9pQXNRSjhjcEtmUzVpSWdmdjMzYWFDSzVzQ3dqMCtNSSs4dwoxSWJBOHc5cWRxMU90dzhDZ2dFQkFNODAyRjZtWFdOU0F1Q2hPMDgxZkcvc0d4NElPK0RiYzFHZjVTTDl3MFozCjZPTzhtMktrb25KekhXWGE0UXJWRFUvc09HYkVkNVM0WUpnTUlLV1YxTFpTcXVLajJ4K1dxdmlqRkZaTXBHSWMKZVI0Zjk3dUorSjhrMnNIOFJxZkdkR0hXS2plWHZqblpjSGpPZ3B5TVNlL09aeDNLSUhKYlpuUDlYd0twS0grWQpYQlpleGJ4VUJMWXlhb3VsOHlLRWtJRjZaUk5zMHlzTEN1OExiclRPaTd4Wnh1cVk5amc4TkhabDRQNTNMM2hiCjB2T3kwQkpxWG1kZHVDZnMzdHo4MzU0QVAzenJRWXlJQUljV3pNOERzZ1JBdzNic3d3Y25PT1dETThOZjZqNlYKNC92am1Jc3Zsa2xSaUlzLzNKdEE0QVdzSHFJZzYxVkt2WVJkYkMzNDZ3a0NnZ0VBWXg0bUJReGdoSHYveCsxZQpIQllMZkY0Qk1wWVRRQmtOSG1teEt3Unl0MWhCVzIvbFJKd2JOdGdQTWwyK1J4c2JWR0FKWjhjMUxNRUJiMTJlClh0aFh3UHYzZHpZWUNtTUQ4TW5aVXdnTjMzdEF3aTFYWTBGUUV2NTlleXM2Y2VsT1REVDgvTy9GbDdZM0EyUVAKV3NUcjJpWDdYQThyVTBqc3pZTDNsc1NKdm90YVczNUZzZmNWaTVXN1BxNzhlNXVkWXB1aFJuYUJEYXhycTBWRApYL1JiTzlXWFdyTVo3dkkzMGo2ZnZzbW1vL0dUUWxqZWY4bGZEdHpCSE1rb1NnR010V3lySXUxcUdhWmVPOUs1CnkweVB4cW51a1FaM1NHc1hyQ25WbXlEcVEza3M1RkN0MklMQ3ZpOGoxcUV6MW1ITURjMnllbE1jVndLOEphRG4KTlFPWUl3S0NBUUFGU1V2YjNsS3puZndFenhnOFJSa1BvZTV2TGJhWlhmL3JMVEVqVzJZSC9qY3EyRHorbjBTbAp0dG9oSnh4bXNsak1tVEkzTFB3QUIxUXZqTitvV2RJN2RKQjNoOGFuWDZpcy96d2RsNGI2R2MvZFBPT05IVkFDCmYyWTFYTUpRdFhkeXA0d2NMdnJqYnZDM3BFMGd3Vk9Ca3JwK3dCRmoyWUVicEhNd0ZqQzZVS0RJMFZJcUk5cWEKNjE1Y2diZGFRaGVOdGhtdURUQzJBR29lL3lPcjZUa1hiUkx1R1VqdTFscGdTdWthbE4vWktqNlBpUmhWMy9EWQpva040Z1VxT1NNVkx1cVhrQWZ5Q0lWWWlIQ3JOZlVLbGFTR1RmeWJhbjkyTHZYVXNudDNUQ3UvdUZUaG5GS2U0CjV5T2NxZHh1K1pDOWxFNlR4Rk04c2ROejlRNDFmZ3hCQW9JQkFGVUowTE9NenVDYWJYV1NaaWN1bHZhcmR1aUQKd054QlR6RnEySXZySExGdm5GV2hqMzJqSkQ4Qm1UUnR2UkJ6V3BPNnZZOFdTdTZ6TnJRQWpTYzkyYW1lYmlXcAprTStLMTh0NUM5d2d5Z2ZVRnZpc0xXLzVMN21YaFhaYk1lc09ybmtlRFFLTUxxbnB3SnRNemMvNTZiemViQlc2Cm5ZRXI0Rm1GWEdCd0EzRTdDdXRNbHZBNm82d2kzU3QwQ1A1T3hhNWNJSk0rdmEzdHJTTGJVemU2a3o4Wkh5SDQKVTNoNUFUT3czRDhMRGx6b1BwVXlTSUpidEFubXlibjFFcWRQM2NXejVoOGREVm8wUzR5dG5pditvd2t0VXJ4RwpEYXE2NG1Ob0U0dFlVZlBtOEpiK0kyYnhUaXVOZDRyd3FuMTdTYUdEY1MxQytxSzBOSUthb2dxcmpJcz0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0iCkpXVF9QVUJMSUM9Ii0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tCk1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBdExYWHhRaGpkVnZ2YkR1bU41encKTWR5Z1llOEttTEdYbGRXNHd0NGxBTVp0QVA3SUNmbktmV0l1alhFOHNiekJWb0dpUmxnQ1FyWEJ6bHFmanRNRgo3cEs2SW9tc1o0cVROMkJnUzVvTWlLWDNraktCOXErWU9wbUZVSjNicUUzekwrU2tFMjMwZ2tMcThQbnQwaTIrCjhjZFRxRzNCTC9PZmxMZzBHU1NkZlVSYnl4L2luemZ2a0w4WjMxM1NraCsrejRkekZzYzNtamZDczVzSS9WNnoKVHVacXlFMDBnR3c5Um5TMFUrMkV6NEx6alVqRm14RjJoaHpTTWtEbVJYY0xnMGkzSXdTZkgrUWd4VjY0eEFCdgoxOWJHSkNXSGRDS2p2cU43WGduM1FtSnY0Z3ByYjFXVjNsZ3F4M0gvci9KOXVhVFF3bUpYV2poYWZwaEc3UVdjCjJYYldGWVd3ZHNaY0FyKzhTU3NWYjAxWjQ0UkNkMFFZSEdIV1I0MlBYQzQ3YjlvRytHK3hBTjE1RmlxOXIzM1QKdXNLNnFYMHRnZGtJZE8vRXJZRU5GQUtHcU1pbFJIZkNmMXpPSEUzalQyK2hxdjZKNkgrcno0QnQvQ2IvZUZLeQpYU3ZDOVgvNlFYMm9LSHVMYThZN3hJOU1DbkIveWN2RmpxaHBkOWYva05GZDRZWGZzRHpjb25HS1NULzJ6Q3hICmxPd3MycEdTZ0VlbU95Y0FuRlZMSVVkNDdjZ0ZsTW80Z2F3UnU1K3REbUNGMjU2MVdaNmVEQ0RyRVBOZXRWWFIKZThyRUJ2V3VnMmlaZzdBRTdDZ0FqTHdTRjNibEo5a3RQelZWOHJPWU5MbWY5RURNUjkvR1UvT3VyT0MwMVByWAp5aW1EMjRrU2NXNm0zaVlYQmxOWE5JY0NBd0VBQVE9PQotLS0tLUVORCBQVUJMSUMgS0VZLS0tLS0iClNTSF9LRVk9Ii0tLS0tQkVHSU4gT1BFTlNTSCBQUklWQVRFIEtFWS0tLS0tCmIzQmxibk56YUMxclpYa3RkakVBQUFBQUJHNXZibVVBQUFBRWJtOXVaUUFBQUFBQUFBQUJBQUFBbHdBQUFBZHpjMmd0Y24KTmhBQUFBQXdFQUFRQUFBSUVBcEFpZFA2c2NOWkpacUQyYlM0QWdKT1lpVk8vZjkwdEduejcyd0ZlVlVTQUJIVVYvdThJSQpqdTUzcmoyZXZMQXFZNHRnaWhrTi9lczByazVPb2NXUS8xU2hXL0lCRXRReko2ekY3MUpZZnFHOTRHM1RMYlY4RmpKK052Clp6bnJ3Qk9HY1ZkTVM4dVF3MFJVeDNZblFWVVBGZGpiNTRiUjJrcXpzWUtzL2NGL2tBQUFJWUhWZjNoaDFYOTRZQUFBQUgKYzNOb0xYSnpZUUFBQUlFQXBBaWRQNnNjTlpKWnFEMmJTNEFnSk9ZaVZPL2Y5MHRHbno3MndGZVZVU0FCSFVWL3U4SUlqdQo1M3JqMmV2TEFxWTR0Z2loa04vZXMwcms1T29jV1EvMVNoVy9JQkV0UXpKNnpGNzFKWWZxRzk0RzNUTGJWOEZqSitOdlp6Cm5yd0JPR2NWZE1TOHVRdzBSVXgzWW5RVlVQRmRqYjU0YlIya3F6c1lLcy9jRi9rQUFBQURBUUFCQUFBQWdFSjFHd0NJbXMKMDVsZ21MckRkU21iTlphZDl2c0JYSThidmpEcVd1MWxnZjExTzhySnV0YVRvL2MwMnN1WHRKQkdPQVBJUzIwZXhtTnRuSAo4Q09xbjZ1czJUcWFzeCtJMUQ1VkVRMWVHTEFvNjRqbzFoSlZvT2Q1VVI2RFNHK3NObXlzODhDNUVKM1RJdG1Pa2hRNlNJCk8zMDZhYlRiS0hQdG0yRVg3Y2R1dGhBQUFBUUdjclJ5NVBvaDVUejU0UnZpWW9qbkRVRHlyK25xdU5IR0ZGV3lTT0prcnYKeHVrOTF5eU9rYzlrZEptemxoa3JCektIelVrcEhrNXdnVmFjWDcrbCthQUFBQUJCQU0zMmkyTkhxb05CQmM3MUtISmZydgp1TG9SRVZWeklXY0UrSWJIZWQyZVAyWmd0d3c3T0NVL2NvQXhHaW1HR3hRZ3puTXR6WEszWjdsOE1yWHVmVjRKOEFBQUJCCkFNdmlXdEVVVXYxZ05ROURTejIwcEwrZE5pUTJ2L1NFbXhFVVFuaEorbFFXblVKRFMvcDJHdi9vUlNXcGZkTGRvdzhmU2QKaG81T1NmQUVyWlk1RWVTR2NBQUFBY1lXeGxlRUJCYkdWNGN5MU5ZV05DYjI5ckxVRnBjaTVzYjJOaGJBRUNBd1FGQmdjPQotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0iCkRPTUFJTj0ibG9jYWxob3N0IgpIT1NUX1ZBTElESVRZX1NFQ09ORFM9IjcyMDAiCkNMSUVOVF9WQUxJRElUWV9TRUNPTkRTPSI2MDAiCg==\" | base64 -d > ./server/.env",
        "yarn --immutable",
        "yarn --cwd ./server run prisma generate",
        "yarn --cwd ./server run prisma migrate deploy",
        "yarn --cwd ./server build",
        "yarn run concurrently --kill-others --names \"web,server,test\" --success \"command-test\" \"yarn workspace web dev\" \"yarn workspace server start\" \"yarn workspace web test\""
      ],
      "needs": [
        "build"
      ],
      "neededFiles": [
        "build:/repo/server/dist"
      ],
      "service": {
        "image": "postgres",
        "healthcheck": "pg_isready",
        "environment": [
          {
            "POSTGRES_PASSWORD": "development"
          },
          {
            "POSTGRES_USER": "development"
          },
          {
            "POSTGRES_DB": "development"
          }
        ]
      }
    }
  ]
}