{
  "gitConfig": "--branch v4.0.2",
  "containers": [
    {
      "id": "build",
      "image": "base",
      "steps": [
        "yarn --immutable",
        "yarn --cwd ./server build"
      ],
      "uploads": [
        "/repo/server/dist"
      ]
    },
    {
      "id": "test",
      "image": "base",
      "steps": [
        "cp -a /neededFiles/dist server/dist",
        "echo \"REFUQUJBU0VfVVJMPSJwb3N0Z3Jlc3FsOi8vZGV2ZWxvcG1lbnQ6ZGV2ZWxvcG1lbnRAZGI6NTQzMi9kZXZlbG9wbWVudCIKSldUX1BSSVZBVEU9Ii0tLS0tQkVHSU4gUlNBIFBSSVZBVEUgS0VZLS0tLS0KTUlJSktBSUJBQUtDQWdFQXRMWFh4UWhqZFZ2dmJEdW1ONXp3TWR5Z1llOEttTEdYbGRXNHd0NGxBTVp0QVA3SQpDZm5LZldJdWpYRThzYnpCVm9HaVJsZ0NRclhCemxxZmp0TUY3cEs2SW9tc1o0cVROMkJnUzVvTWlLWDNraktCCjlxK1lPcG1GVUozYnFFM3pMK1NrRTIzMGdrTHE4UG50MGkyKzhjZFRxRzNCTC9PZmxMZzBHU1NkZlVSYnl4L2kKbnpmdmtMOFozMTNTa2grK3o0ZHpGc2MzbWpmQ3M1c0kvVjZ6VHVacXlFMDBnR3c5Um5TMFUrMkV6NEx6alVqRgpteEYyaGh6U01rRG1SWGNMZzBpM0l3U2ZIK1FneFY2NHhBQnYxOWJHSkNXSGRDS2p2cU43WGduM1FtSnY0Z3ByCmIxV1YzbGdxeDNIL3IvSjl1YVRRd21KWFdqaGFmcGhHN1FXYzJYYldGWVd3ZHNaY0FyKzhTU3NWYjAxWjQ0UkMKZDBRWUhHSFdSNDJQWEM0N2I5b0crRyt4QU4xNUZpcTlyMzNUdXNLNnFYMHRnZGtJZE8vRXJZRU5GQUtHcU1pbApSSGZDZjF6T0hFM2pUMitocXY2SjZIK3J6NEJ0L0NiL2VGS3lYU3ZDOVgvNlFYMm9LSHVMYThZN3hJOU1DbkIvCnljdkZqcWhwZDlmL2tORmQ0WVhmc0R6Y29uR0tTVC8yekN4SGxPd3MycEdTZ0VlbU95Y0FuRlZMSVVkNDdjZ0YKbE1vNGdhd1J1NSt0RG1DRjI1NjFXWjZlRENEckVQTmV0VlhSZThyRUJ2V3VnMmlaZzdBRTdDZ0FqTHdTRjNibApKOWt0UHpWVjhyT1lOTG1mOUVETVI5L0dVL091ck9DMDFQclh5aW1EMjRrU2NXNm0zaVlYQmxOWE5JY0NBd0VBCkFRS0NBZ0VBZ2dOZWROeS9LZDEyR1VtbElkZmduQThldUxjUnlaL2o3cUl3WnNzS2xrOHNkNDNYQUE1ZVYrMCsKanZiTWN4ZlpoZEtJbk5HTzlzM3IzUG9vVjhxTk53TUx0Zk9WUFgxZXczV3NjbGduOGx4dURSb1hsUkxxbENhRgoydVZuOXVQMk5odnF6Q3ZNd2JkQmJ4Unh2VWk2V3h0TW5oNHc0cjRGcnlzRUdKN1dUQnpWYWdQTHVUKzJOVTY0Clg1TVIvNTJsVzR3WkNtZFVJcmxCZEpUelY4ODlkR09rcWUyWisxZGtrbjgraWkrVjRQSlhKZXdZZDZPTndabVUKeFNFYVN4b0dCM05XaDNRNHcrb09oZEhMWHdEdGRyMklHdE9CYTlYTU4wbEpaZlFIbUJSWWFLbVVlQ3A4UTlidApHRWQxYlBJcThGaWE5VzlwWjNpcDZ2REYvcHVPSjFWNXE5Q0dXckZzYXZWelJ4NlFVbE1DVUM3bVR3K0luZmFICkkrcUhYNHhwN21jRWQ2L1VMdTBTVkI4NVZINkdUc3FiM05XUVo1c0RJQ1VHMzNqU0VOL3dzVmJPamdwTlBIbHAKc1VFSXZwLzlCNjY1Mlh3amU1QjlRTDRoREJpV3llMnBaaHNDdzN0Q3BaR0h1T0ZOQXdnbFYvS0g4RzJXdTZWegpMZmZLSzVaYzduZnovSEhWTi96enlWK05DY1YveHpET1ZiQ0JzRnZCcEVVcWk0U0ZMYy90TnJlQnJNeSsxVjdNCnYxVGJZdkdCZVVLQ2hMOW16VXJKOXBEcDBQM1VrdFB6L0lOZU4zN1UvWkFDVzREQ2lrUFgvVFV3NjQzcDFqMnAKVG15RWJNZDFQbnByQlRFd0Q1RmJNNFFiNzRlQ05oRU5Qc1hwTmhqRFduc3NRdG1MWXBFQ2dnRUJBTjlEdDJ1MQppb0pIYmtHem9JZFRpbDA2S2krOFZna3J4RmIwM2FvbjZLbnlwaysrMHpFOXZVZE92WkIxSW9IbVJyaExGaktaCktONnl3ZUFOV3F6aVpiNHpUUDJoRndmVTFnMzRlQ0RpWWUwWHNucFd3SUVzQ0NyKzU0S1NNbVJKUGlReEc0eGIKRW1USGduQXRFdVh6Qkx2K0x1RlN5RHFJRlJwd01hUHB5K0s2TlJUaWo1MlErUkJNT09EOGhHUXpmOFRQbEZKUgp2SHJYL0hwUG5ld1BSSHVCdG9ocmhzVmtqTnJMUUZjVnVCZkxNMDRPRVYvaEJLZ1hCSEIzMlQ0dDc1S09OZVhOCldJUWdWOTI2ZklVeTVJaEJUREpvakxNeTYxTTlvaUFzUUo4Y3BLZlM1aUlnZnYzM2FhQ0s1c0N3ajArTUkrOHcKMUliQTh3OXFkcTFPdHc4Q2dnRUJBTTgwMkY2bVhXTlNBdUNoTzA4MWZHL3NHeDRJTytEYmMxR2Y1U0w5dzBaMwo2T084bTJLa29uSnpIV1hhNFFyVkRVL3NPR2JFZDVTNFlKZ01JS1dWMUxaU3F1S2oyeCtXcXZpakZGWk1wR0ljCmVSNGY5N3VKK0o4azJzSDhScWZHZEdIV0tqZVh2am5aY0hqT2dweU1TZS9PWngzS0lISmJablA5WHdLcEtIK1kKWEJaZXhieFVCTFl5YW91bDh5S0VrSUY2WlJOczB5c0xDdThMYnJUT2k3eFp4dXFZOWpnOE5IWmw0UDUzTDNoYgowdk95MEJKcVhtZGR1Q2ZzM3R6ODM1NEFQM3pyUVl5SUFJY1d6TThEc2dSQXczYnN3d2NuT09XRE04TmY2ajZWCjQvdmptSXN2bGtsUmlJcy8zSnRBNEFXc0hxSWc2MVZLdllSZGJDMzQ2d2tDZ2dFQVl4NG1CUXhnaEh2L3grMWUKSEJZTGZGNEJNcFlUUUJrTkhtbXhLd1J5dDFoQlcyL2xSSndiTnRnUE1sMitSeHNiVkdBSlo4YzFMTUVCYjEyZQpYdGhYd1B2M2R6WVlDbU1EOE1uWlV3Z04zM3RBd2kxWFkwRlFFdjU5ZXlzNmNlbE9URFQ4L08vRmw3WTNBMlFQCldzVHIyaVg3WEE4clUwanN6WUwzbHNTSnZvdGFXMzVGc2ZjVmk1VzdQcTc4ZTV1ZFlwdWhSbmFCRGF4cnEwVkQKWC9SYk85V1hXck1aN3ZJMzBqNmZ2c21tby9HVFFsamVmOGxmRHR6QkhNa29TZ0dNdFd5ckl1MXFHYVplTzlLNQp5MHlQeHFudWtRWjNTR3NYckNuVm15RHFRM2tzNUZDdDJJTEN2aThqMXFFejFtSE1EYzJ5ZWxNY1Z3SzhKYURuCk5RT1lJd0tDQVFBRlNVdmIzbEt6bmZ3RXp4ZzhSUmtQb2U1dkxiYVpYZi9yTFRFalcyWUgvamNxMkR6K24wU2wKdHRvaEp4eG1zbGpNbVRJM0xQd0FCMVF2ak4rb1dkSTdkSkIzaDhhblg2aXMvendkbDRiNkdjL2RQT09OSFZBQwpmMlkxWE1KUXRYZHlwNHdjTHZyamJ2QzNwRTBnd1ZPQmtycCt3QkZqMllFYnBITXdGakM2VUtESTBWSXFJOXFhCjYxNWNnYmRhUWhlTnRobXVEVEMyQUdvZS95T3I2VGtYYlJMdUdVanUxbHBnU3VrYWxOL1pLajZQaVJoVjMvRFkKb2tONGdVcU9TTVZMdXFYa0FmeUNJVllpSENyTmZVS2xhU0dUZnliYW45Mkx2WFVzbnQzVEN1L3VGVGhuRktlNAo1eU9jcWR4dStaQzlsRTZUeEZNOHNkTno5UTQxZmd4QkFvSUJBRlVKMExPTXp1Q2FiWFdTWmljdWx2YXJkdWlECndOeEJUekZxMkl2ckhMRnZuRldoajMyakpEOEJtVFJ0dlJCeldwTzZ2WThXU3U2ek5yUUFqU2M5MmFtZWJpV3AKa00rSzE4dDVDOXdneWdmVUZ2aXNMVy81TDdtWGhYWmJNZXNPcm5rZURRS01McW5wd0p0TXpjLzU2YnplYkJXNgpuWUVyNEZtRlhHQndBM0U3Q3V0TWx2QTZvNndpM1N0MENQNU94YTVjSUpNK3ZhM3RyU0xiVXplNmt6OFpIeUg0ClUzaDVBVE93M0Q4TERsem9QcFV5U0lKYnRBbm15Ym4xRXFkUDNjV3o1aDhkRFZvMFM0eXRuaXYrb3drdFVyeEcKRGFxNjRtTm9FNHRZVWZQbThKYitJMmJ4VGl1TmQ0cndxbjE3U2FHRGNTMUMrcUswTklLYW9ncXJqSXM9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tIgpKV1RfUFVCTElDPSItLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLQpNSUlDSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQXRMWFh4UWhqZFZ2dmJEdW1ONXp3Ck1keWdZZThLbUxHWGxkVzR3dDRsQU1adEFQN0lDZm5LZldJdWpYRThzYnpCVm9HaVJsZ0NRclhCemxxZmp0TUYKN3BLNklvbXNaNHFUTjJCZ1M1b01pS1gza2pLQjlxK1lPcG1GVUozYnFFM3pMK1NrRTIzMGdrTHE4UG50MGkyKwo4Y2RUcUczQkwvT2ZsTGcwR1NTZGZVUmJ5eC9pbnpmdmtMOFozMTNTa2grK3o0ZHpGc2MzbWpmQ3M1c0kvVjZ6ClR1WnF5RTAwZ0d3OVJuUzBVKzJFejRMempVakZteEYyaGh6U01rRG1SWGNMZzBpM0l3U2ZIK1FneFY2NHhBQnYKMTliR0pDV0hkQ0tqdnFON1hnbjNRbUp2NGdwcmIxV1YzbGdxeDNIL3IvSjl1YVRRd21KWFdqaGFmcGhHN1FXYwoyWGJXRllXd2RzWmNBcis4U1NzVmIwMVo0NFJDZDBRWUhHSFdSNDJQWEM0N2I5b0crRyt4QU4xNUZpcTlyMzNUCnVzSzZxWDB0Z2RrSWRPL0VyWUVORkFLR3FNaWxSSGZDZjF6T0hFM2pUMitocXY2SjZIK3J6NEJ0L0NiL2VGS3kKWFN2QzlYLzZRWDJvS0h1TGE4WTd4STlNQ25CL3ljdkZqcWhwZDlmL2tORmQ0WVhmc0R6Y29uR0tTVC8yekN4SApsT3dzMnBHU2dFZW1PeWNBbkZWTElVZDQ3Y2dGbE1vNGdhd1J1NSt0RG1DRjI1NjFXWjZlRENEckVQTmV0VlhSCmU4ckVCdld1ZzJpWmc3QUU3Q2dBakx3U0YzYmxKOWt0UHpWVjhyT1lOTG1mOUVETVI5L0dVL091ck9DMDFQclgKeWltRDI0a1NjVzZtM2lZWEJsTlhOSWNDQXdFQUFRPT0KLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tIgpTU0hfS0VZPSItLS0tLUJFR0lOIE9QRU5TU0ggUFJJVkFURSBLRVktLS0tLQpiM0JsYm5OemFDMXJaWGt0ZGpFQUFBQUFCRzV2Ym1VQUFBQUVibTl1WlFBQUFBQUFBQUFCQUFBQWx3QUFBQWR6YzJndGNuCk5oQUFBQUF3RUFBUUFBQUlFQXBBaWRQNnNjTlpKWnFEMmJTNEFnSk9ZaVZPL2Y5MHRHbno3MndGZVZVU0FCSFVWL3U4SUkKanU1M3JqMmV2TEFxWTR0Z2loa04vZXMwcms1T29jV1EvMVNoVy9JQkV0UXpKNnpGNzFKWWZxRzk0RzNUTGJWOEZqSitOdgpaem5yd0JPR2NWZE1TOHVRdzBSVXgzWW5RVlVQRmRqYjU0YlIya3F6c1lLcy9jRi9rQUFBSVlIVmYzaGgxWDk0WUFBQUFICmMzTm9MWEp6WVFBQUFJRUFwQWlkUDZzY05aSlpxRDJiUzRBZ0pPWWlWTy9mOTB0R256NzJ3RmVWVVNBQkhVVi91OElJanUKNTNyajJldkxBcVk0dGdpaGtOL2VzMHJrNU9vY1dRLzFTaFcvSUJFdFF6SjZ6RjcxSllmcUc5NEczVExiVjhGakorTnZaegpucndCT0djVmRNUzh1UXcwUlV4M1luUVZVUEZkamI1NGJSMmtxenNZS3MvY0Yva0FBQUFEQVFBQkFBQUFnRUoxR3dDSW1zCjA1bGdtTHJEZFNtYk5aYWQ5dnNCWEk4YnZqRHFXdTFsZ2YxMU84ckp1dGFUby9jMDJzdVh0SkJHT0FQSVMyMGV4bU50bkgKOENPcW42dXMyVHFhc3grSTFENVZFUTFlR0xBbzY0am8xaEpWb09kNVVSNkRTRytzTm15czg4QzVFSjNUSXRtT2toUTZTSQpPMzA2YWJUYktIUHRtMkVYN2NkdXRoQUFBQVFHY3JSeTVQb2g1VHo1NFJ2aVlvam5EVUR5citucXVOSEdGRld5U09Ka3J2Cnh1azkxeXlPa2M5a2RKbXpsaGtyQnpLSHpVa3BIazV3Z1ZhY1g3K2wrYUFBQUFCQkFNMzJpMk5IcW9OQkJjNzFLSEpmcnYKdUxvUkVWVnpJV2NFK0liSGVkMmVQMlpndHd3N09DVS9jb0F4R2ltR0d4UWd6bk10elhLM1o3bDhNclh1ZlY0SjhBQUFCQgpBTXZpV3RFVVV2MWdOUTlEU3oyMHBMK2ROaVEydi9TRW14RVVRbmhKK2xRV25VSkRTL3AyR3Yvb1JTV3BmZExkb3c4ZlNkCmhvNU9TZkFFclpZNUVlU0djQUFBQWNZV3hsZUVCQmJHVjRjeTFOWVdOQ2IyOXJMVUZwY2k1c2IyTmhiQUVDQXdRRkJnYz0KLS0tLS1FTkQgT1BFTlNTSCBQUklWQVRFIEtFWS0tLS0tIgpET01BSU49ImxvY2FsaG9zdCIKSE9TVF9WQUxJRElUWV9TRUNPTkRTPSI3MjAwIgpDTElFTlRfVkFMSURJVFlfU0VDT05EUz0iNjAwIgo=\" | base64 -d > ./server/.env",
        "yarn --immutable",
        "yarn --cwd ./server run prisma generate",
        "yarn --cwd ./server run prisma migrate deploy",
        "yarn --cwd ./server build",
        "yarn run concurrently --kill-others --names \"web,server,test\" --success \"command-test\" \"yarn workspace web dev\" \"yarn workspace server start\" \"yarn workspace web test\""
      ],
      "needs": [
        "build"
      ],
      "neededFiles": [
        "build:/repo/server/dist"
      ],
      "services": {
        "db": {
          "image": "postgres",
          "healthcheck": "pg_isready",
          "environment": {
            "POSTGRES_PASSWORD": "development",
            "POSTGRES_USER": "development",
            "POSTGRES_DB": "development"
          }
        }
      }
    }
  ]
}